{% extends 'base.html' %}
{% block title %}Agenda Médica{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mb-0"><i class="bi bi-calendar2-week"></i> Agenda Médica</h4>
    <div>
      <a class="btn btn-primary btn-icon" href="{% url 'agendamedica-create' %}"><i class="bi bi-plus-circle"></i> Nova agenda</a>
    </div>
  </div>
  <div class="card ag-card mb-3">
    <div class="ag-header"><h6><i class="bi bi-filter"></i> Filtros</h6></div>
    <div class="card-body">
      <form method="get" class="row g-2">
        <div class="col-md-4"><input type="number" min="1" step="1" name="medico" value="{{ request.GET.medico }}" class="form-control" placeholder="ID do médico" /></div>
        <div class="col-md-4"><input type="number" min="1" step="1" name="especialidade" value="{{ request.GET.especialidade }}" class="form-control" placeholder="ID da especialidade" /></div>
        <div class="col-md-4"><button class="btn btn-outline-primary w-100"><i class="bi bi-search"></i> Filtrar</button></div>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-body table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>Médico</th>
            <th>Especialidade</th>
            <th>Dia da semana</th>
            <th>Capacidade</th>
            <th>Ativo</th>
            <th class="text-end">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for a in agenda_list %}
          <tr>
            <td>{{ a.medico.nome }} ({{ a.medico.crm }})</td>
            <td>{{ a.especialidade.nome }}</td>
            <td>{{ a.get_dia_semana_display }}</td>
            <td>{{ a.capacidade }}</td>
            <td>{% if a.ativo %}<span class="badge bg-success">Sim</span>{% else %}<span class="badge bg-secondary">Não</span>{% endif %}</td>
            <td class="text-end">
              <a href="{% url 'agendamedica-update' a.pk %}" class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></a>
              <a href="{% url 'agendamedica-delete' a.pk %}" class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></a>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="6" class="text-center text-muted">Nenhuma agenda cadastrada.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
